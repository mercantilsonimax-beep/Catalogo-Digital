<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mercantil Sonimax</title>
<style>
/* Reset b치sico */
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', sans-serif; }

/* Header estilo Amazon */
header {
  background:#db0012;
  color:white;
  padding:15px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
}

header h1 { font-size:24px; }

header .buttons button {
  background:##2a36b8;
  color:#111;
  font-weight:bold;
  padding:8px 12px;
  margin-left:10px;
  border:1px;
  border-radius:6px;
  cursor:pointer;
}

/* Buscador */
#buscador { width:300px; padding:8px; border-radius:6px; border:none; margin-right:10px; }

/* Filtro categor칤as */
#filtroCategoria { padding:8px; border-radius:6px; border:none; }

/* Login */
.login-box {
  width:300px; margin:40px auto; background:white; padding:20px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); text-align:center;
}

/* Panel admin */
#adminPanel {
  background:white; padding:20px; margin:20px auto; width:320px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

#adminPanel input { width:90%; margin:5px 0; padding:8px; border-radius:6px; border:1px solid #ccc; }

#adminPanel button { width:95%; padding:10px; margin-top:10px; background:#131921; color:white; font-weight:bold; border:none; border-radius:6px; cursor:pointer; }

/* Grid productos estilo Amazon */
.grid {
  display: flex;             /* usamos flexbox */
  flex-wrap: wrap;           /* permite que las tarjetas pasen a la siguiente fila */
  gap:20px;                  /* espacio entre tarjetas */
  justify-content: flex-start;
  padding:20px;
}

/* Contenedor tarjeta */
.card {
  width: 320px;              /* ancho fijo de la tarjeta */
  background:white;
  border-radius:10px;
  overflow:hidden;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
  transition: transform 0.3s;
  display:flex;
  flex-direction: column;
  margin:10px;
}

/* Hover efecto */
.card:hover {
  transform:translateY(-5px);
}

/* Contenedor de la imagen con proporci칩n 4:3 */
.card-img-container {
  width:100%;
  aspect-ratio: 4/3;       /* Mantiene proporci칩n 1600x1200 */
  overflow:hidden;
}

.card-img-container img {
  width:100%;
  height:100%;
  object-fit:cover;        /* llena el contenedor sin deformarse */
}

/* Contenido debajo de la imagen */
.card-body {
  padding:15px;
  flex-grow:1;
}

.card-body h3 { font-size:18px; margin-bottom:5px; }

.card-body p { font-size:14px; margin-bottom:5px; color:#555; }

.card-body .price { font-weight:bold; font-size:16px; color:#b12704; }

.card-body button {
  background:#f0c14b; border:1px solid #a88734; border-radius:4px;
  padding:6px 10px; margin-top:5px; cursor:pointer; font-weight:bold;
}

/* Botones ocultos por defecto */
.hidden { display:none; }

/* Responsive */
@media(max-width: 600px){
  .card { width: 100%; }
}
  /* Modal */
.modal {
  display: none; /* oculto por defecto */
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.8); /* fondo semi-transparente */
}

.modal-content {
  background:white;
  margin: 50px auto;
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 700px;
  display:flex;
  flex-direction: column;
  align-items:center;
}

.modal-content img {
  width:100%;
  height:auto;
  max-height:400px;
  object-fit:cover;
  border-radius:10px;
}

.modal-content h3 {
  margin:15px 0 5px 0;
}

.modal-content p {
  margin:5px 0;
}

.close-modal {
  position:absolute;
  top:20px;
  right:30px;
  font-size:28px;
  font-weight:bold;
  color:white;
  cursor:pointer;
}
</style>
</head>
<body>

<header>
  <h1>Mercantil Sonimax</h1>
  <div class="buttons">
    <input type="text" id="buscador" placeholder="Buscar nombre o c칩digo">
    <select id="filtroCategoria">
      <option value="">Todas las categor칤as</option>
    </select>
    <button class="admin-btn" onclick="mostrarLogin()">Admin</button>
    <button class="logout-btn hidden" id="logoutBtn" onclick="cerrarSesion()">Cerrar sesi칩n</button>
  </div>
</header>

<!-- LOGIN -->
<div id="loginSection" class="login-box hidden">
  <h3>Administrador</h3>
  <input type="password" id="password" placeholder="Contrase침a">
  <button onclick="login()">Ingresar</button>
</div>

<!-- PANEL ADMIN -->
<div id="adminPanel" class="hidden">
  <h3>Agregar Producto</h3>
  <input type="text" id="codigo" placeholder="C칩digo del producto">
  <input type="text" id="nombre" placeholder="Nombre">
  <input type="text" id="descripcion" placeholder="Descripci칩n">
  <input type="text" id="categoria" placeholder="Categor칤a">
  <input type="number" id="precio" placeholder="Precio">
  <input type="file" id="imagen" accept="image/*">
  <button onclick="guardarProducto()">Guardar Producto</button>
</div>

<!-- Grid Productos -->
<div class="grid" id="tienda"></div>

<script>
// 游댏 Configuraci칩n
const ADMIN_PASSWORD = "1234"; // cambia la contrase침a

let productos = JSON.parse(localStorage.getItem("productos")) || [];

const tienda = document.getElementById("tienda");
const buscador = document.getElementById("buscador");
const filtroCategoria = document.getElementById("filtroCategoria");

function guardarLocal(){ localStorage.setItem("productos", JSON.stringify(productos)); }

// Actualizar categor칤as autom치ticamente
function actualizarCategorias(){
  const categorias = [...new Set(productos.map(p=>p.categoria))];
  filtroCategoria.innerHTML='<option value="">Todas las categor칤as</option>';
  categorias.forEach(cat => filtroCategoria.innerHTML+=`<option value="${cat}">${cat}</option>`);
}

// Renderizar productos
function renderizar(){
  const textoBusqueda = buscador.value.toLowerCase();
  const categoriaSeleccionada = filtroCategoria.value;

  tienda.innerHTML = "";

  productos.filter(p=>
    (p.nombre.toLowerCase().includes(textoBusqueda) || p.codigo.toLowerCase().includes(textoBusqueda)) &&
    (categoriaSeleccionada === "" || p.categoria === categoriaSeleccionada)
  ).forEach((p,i)=>{
    tienda.innerHTML += `
      <div class="card">
        <img src="${p.imagen}">
        <div class="card-body">
          <h3>${p.nombre}</h3>
          <p>${p.descripcion}</p>
          <p><strong>C칩digo:</strong> ${p.codigo}</p>
          <p><strong>Categor칤a:</strong> ${p.categoria}</p>
          <p class="price">$${p.precio}</p>
          ${isAdmin()?`<button onclick="editar(${i})">Editar</button><button onclick="eliminar(${i})">Eliminar</button>`:``}
        </div>
      </div>
    `;
  });

  actualizarCategorias();
}

// Guardar producto
function guardarProducto(){
  const file = document.getElementById("imagen").files[0];
  const reader = new FileReader();
  reader.onload = function(){
    productos.push({
      codigo: codigo.value,
      nombre: nombre.value,
      descripcion: descripcion.value,
      categoria: categoria.value,
      precio: precio.value,
      imagen: reader.result
    });
    guardarLocal();
    renderizar();
  }
  if(file) reader.readAsDataURL(file);
}

// Editar y eliminar
function eliminar(i){ productos.splice(i,1); guardarLocal(); renderizar(); }
function editar(i){ alert("Modo edici칩n simplificado. Puedes mejorarlo despu칠s 游땔"); }

// Login Admin
function mostrarLogin(){ document.getElementById("loginSection").classList.toggle("hidden"); }
function login(){
  if(document.getElementById("password").value===ADMIN_PASSWORD){
    localStorage.setItem("admin","true");
    document.getElementById("adminPanel").classList.remove("hidden");
    document.getElementById("logoutBtn").classList.remove("hidden");
    document.getElementById("loginSection").classList.add("hidden");
    renderizar();
  } else alert("Contrase침a incorrecta");
}
function cerrarSesion(){
  localStorage.removeItem("admin");
  document.getElementById("adminPanel").classList.add("hidden");
  document.getElementById("logoutBtn").classList.add("hidden");
  renderizar();
}
function isAdmin(){ return localStorage.getItem("admin")==="true"; }

if(isAdmin()){ document.getElementById("adminPanel").classList.remove("hidden"); document.getElementById("logoutBtn").classList.remove("hidden"); }

buscador.addEventListener("input",renderizar);
filtroCategoria.addEventListener("change",renderizar);

renderizar();
  // Modal
const modal = document.getElementById("modalProducto");
const modalImagen = document.getElementById("modalImagen");
const modalNombre = document.getElementById("modalNombre");
const modalDescripcion = document.getElementById("modalDescripcion");
const modalCodigo = document.getElementById("modalCodigo");
const modalCategoria = document.getElementById("modalCategoria");
const modalPrecio = document.getElementById("modalPrecio");

function abrirModal(i){
  const p = productos[i];
  modalImagen.src = p.imagen;
  modalNombre.textContent = p.nombre;
  modalDescripcion.textContent = p.descripcion;
  modalCodigo.textContent = p.codigo;
  modalCategoria.textContent = p.categoria;
  modalPrecio.textContent = "$" + p.precio;
  modal.style.display = "block";
}

function cerrarModal(){
  modal.style.display = "none";
}

// Cerrar al hacer clic fuera del modal
window.onclick = function(event){
  if(event.target == modal) modal.style.display = "none";
}
</script>
  <!-- Modal Producto -->
<div id="modalProducto" class="modal">
  <span class="close-modal" onclick="cerrarModal()">&times;</span>
  <div class="modal-content" id="modalContent">
    <img id="modalImagen" src="">
    <h3 id="modalNombre"></h3>
    <p id="modalDescripcion"></p>
    <p><strong>C칩digo:</strong> <span id="modalCodigo"></span></p>
    <p><strong>Categor칤a:</strong> <span id="modalCategoria"></span></p>
    <p class="price" id="modalPrecio"></p>
  </div>
</div>
</body>
</html>
