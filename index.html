<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mercantil Sonimax</title>
<style>
/* Reset b치sico */
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', sans-serif; }

/* Header estilo Amazon */
header {
  background:#db0012;
  color:white;
  padding:15px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
}

header h1 { font-size:24px; }

header .buttons button {
  background:##2a36b8;
  color:#111;
  font-weight:bold;
  padding:8px 12px;
  margin-left:10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

/* Buscador */
#buscador { width:300px; padding:8px; border-radius:6px; border:none; margin-right:10px; }

/* Filtro categor칤as */
#filtroCategoria { padding:8px; border-radius:6px; border:none; }

/* Login */
.login-box {
  width:300px; margin:40px auto; background:white; padding:20px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); text-align:center;
}

/* Panel admin */
#adminPanel {
  background:white; padding:20px; margin:20px auto; width:320px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

#adminPanel input { width:90%; margin:5px 0; padding:8px; border-radius:6px; border:1px solid #ccc; }

#adminPanel button { width:95%; padding:10px; margin-top:10px; background:#131921; color:white; font-weight:bold; border:none; border-radius:6px; cursor:pointer; }

/* Grid productos estilo Amazon */
.grid {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap:20px;
  padding:20px;
}

.card {
  background:white; border-radius:10px; overflow:hidden;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
  transition: transform 0.3s;
}

.card:hover { transform:translateY(-5px); }

.card img {
  width:100%;
  max-width:100%;
  height:auto;
  aspect-ratio: 4 / 3; /* Mantiene proporci칩n 1600x1200 */
  object-fit: cover;
  border-bottom:1px solid #ccc;
}

.card-body { padding:15px; }

.card-body h3 { font-size:18px; margin-bottom:5px; }

.card-body p { font-size:14px; margin-bottom:5px; color:#555; }

.card-body .price { font-weight:bold; font-size:16px; color:#b12704; }

.card-body button {
  background:#f0c14b; border:1px solid #a88734; border-radius:4px;
  padding:6px 10px; margin-top:5px; cursor:pointer; font-weight:bold;
}

/* Botones ocultos por defecto */
.hidden { display:none; }

/* Responsive */
@media(max-width:600px){
  header h1 { font-size:20px; margin-bottom:10px; }
  #buscador { width:100%; margin-bottom:10px; }
}
</style>
</head>
<body>

<header>
  <h1>Mercantil Sonimax</h1>
  <div class="buttons">
    <input type="text" id="buscador" placeholder="Buscar nombre o c칩digo">
    <select id="filtroCategoria">
      <option value="">Todas las categor칤as</option>
    </select>
    <button class="admin-btn" onclick="mostrarLogin()">Admin</button>
    <button class="logout-btn hidden" id="logoutBtn" onclick="cerrarSesion()">Cerrar sesi칩n</button>
  </div>
</header>

<!-- LOGIN -->
<div id="loginSection" class="login-box hidden">
  <h3>Administrador</h3>
  <input type="password" id="password" placeholder="Contrase침a">
  <button onclick="login()">Ingresar</button>
</div>

<!-- PANEL ADMIN -->
<div id="adminPanel" class="hidden">
  <h3>Agregar Producto</h3>
  <input type="text" id="codigo" placeholder="C칩digo del producto">
  <input type="text" id="nombre" placeholder="Nombre">
  <input type="text" id="descripcion" placeholder="Descripci칩n">
  <input type="text" id="categoria" placeholder="Categor칤a">
  <input type="number" id="precio" placeholder="Precio">
  <input type="file" id="imagen" accept="image/*">
  <button onclick="guardarProducto()">Guardar Producto</button>
</div>

<!-- Grid Productos -->
<div class="grid" id="tienda"></div>

<script>
// 游댏 Configuraci칩n
const ADMIN_PASSWORD = "1234"; // cambia la contrase침a

let productos = JSON.parse(localStorage.getItem("productos")) || [];

const tienda = document.getElementById("tienda");
const buscador = document.getElementById("buscador");
const filtroCategoria = document.getElementById("filtroCategoria");

function guardarLocal(){ localStorage.setItem("productos", JSON.stringify(productos)); }

// Actualizar categor칤as autom치ticamente
function actualizarCategorias(){
  const categorias = [...new Set(productos.map(p=>p.categoria))];
  filtroCategoria.innerHTML='<option value="">Todas las categor칤as</option>';
  categorias.forEach(cat => filtroCategoria.innerHTML+=`<option value="${cat}">${cat}</option>`);
}

// Renderizar productos
function renderizar(){
  const textoBusqueda = buscador.value.toLowerCase();
  const categoriaSeleccionada = filtroCategoria.value;

  tienda.innerHTML = "";

  productos.filter(p=>
    (p.nombre.toLowerCase().includes(textoBusqueda) || p.codigo.toLowerCase().includes(textoBusqueda)) &&
    (categoriaSeleccionada === "" || p.categoria === categoriaSeleccionada)
  ).forEach((p,i)=>{
    tienda.innerHTML += `
      <div class="card">
        <img src="${p.imagen}">
        <div class="card-body">
          <h3>${p.nombre}</h3>
          <p>${p.descripcion}</p>
          <p><strong>C칩digo:</strong> ${p.codigo}</p>
          <p><strong>Categor칤a:</strong> ${p.categoria}</p>
          <p class="price">$${p.precio}</p>
          ${isAdmin()?`<button onclick="editar(${i})">Editar</button><button onclick="eliminar(${i})">Eliminar</button>`:``}
        </div>
      </div>
    `;
  });

  actualizarCategorias();
}

// Guardar producto
function guardarProducto(){
  const file = document.getElementById("imagen").files[0];
  const reader = new FileReader();
  reader.onload = function(){
    productos.push({
      codigo: codigo.value,
      nombre: nombre.value,
      descripcion: descripcion.value,
      categoria: categoria.value,
      precio: precio.value,
      imagen: reader.result
    });
    guardarLocal();
    renderizar();
  }
  if(file) reader.readAsDataURL(file);
}

// Editar y eliminar
function eliminar(i){ productos.splice(i,1); guardarLocal(); renderizar(); }
function editar(i){ alert("Modo edici칩n simplificado. Puedes mejorarlo despu칠s 游땔"); }

// Login Admin
function mostrarLogin(){ document.getElementById("loginSection").classList.toggle("hidden"); }
function login(){
  if(document.getElementById("password").value===ADMIN_PASSWORD){
    localStorage.setItem("admin","true");
    document.getElementById("adminPanel").classList.remove("hidden");
    document.getElementById("logoutBtn").classList.remove("hidden");
    document.getElementById("loginSection").classList.add("hidden");
    renderizar();
  } else alert("Contrase침a incorrecta");
}
function cerrarSesion(){
  localStorage.removeItem("admin");
  document.getElementById("adminPanel").classList.add("hidden");
  document.getElementById("logoutBtn").classList.add("hidden");
  renderizar();
}
function isAdmin(){ return localStorage.getItem("admin")==="true"; }

if(isAdmin()){ document.getElementById("adminPanel").classList.remove("hidden"); document.getElementById("logoutBtn").classList.remove("hidden"); }

buscador.addEventListener("input",renderizar);
filtroCategoria.addEventListener("change",renderizar);

renderizar();
</script>
</body>
</html>
